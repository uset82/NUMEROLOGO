'use client'

import React, { useState, useEffect } from 'react'
import { useClientOnly } from '@/utils/clientOnly'
import { carlosManager } from '@/agents/carlos-manager'
import { numerologyLogicAgent } from '@/agents/numerology-logic'

interface NumerologyReport {
  // Números principales basados en el análisis competitivo
  numeroPersonal: number          // MI ESENCIA (Life Path)
  numeroDelAlma: number          // MI MISIÓN (Soul Urge)
  numeroDestino: number          // Destiny Number  
  numeroPersonalidad: number     // Personality Number
  anoPersonal: number           // MI AÑO (Personal Year)
  numeroPinaculo: number        // MI PINÁCULO
  
  // Energías del día/semana/mes (MI ENERGÍA DE HOY)
  diaPersonal: number
  semanaPersonal: number
  mesPersonal: number
  
  // Interpretaciones completas
  interpretaciones: {
    numeroPersonal: string
    numeroDelAlma: string
    numeroDestino: string
    numeroPersonalidad: string
    anoPersonal: string
    numeroPinaculo: string
    diaPersonal: string
    semanaPersonal: string
    mesPersonal: string
  }
  
  // Información adicional
  numerosMaestros: number[]
  recomendaciones: string[]
  compatibilidad: string
}

export function NumerologyCalculator() {
  const [name, setName] = useState('')
  const [birthDate, setBirthDate] = useState('')
  const [result, setResult] = useState<NumerologyReport | null>(null)
  const [calculating, setCalculating] = useState(false)
  const [currentYear] = useState(new Date().getFullYear())
  const isClient = useClientOnly()

  const calculateLifePathNumber = (date: string): number => {
    const digits = date.replace(/\D/g, '').split('').map(Number)
    let sum = digits.reduce((acc, digit) => acc + digit, 0)
    
    while (sum > 9 && sum !== 11 && sum !== 22 && sum !== 33) {
      sum = sum.toString().split('').map(Number).reduce((acc, digit) => acc + digit, 0)
    }
    
    return sum
  }

  const calculateNameNumber = (name: string): number => {
    const values: { [key: string]: number } = {
      A: 1, B: 2, C: 3, D: 4, E: 5, F: 6, G: 7, H: 8, I: 9,
      J: 1, K: 2, L: 3, M: 4, N: 5, O: 6, P: 7, Q: 8, R: 9,
      S: 1, T: 2, U: 3, V: 4, W: 5, X: 6, Y: 7, Z: 8
    }
    
    let sum = 0
    for (const char of name.toUpperCase().replace(/[^A-Z]/g, '')) {
      sum += values[char] || 0
    }
    
    while (sum > 9 && sum !== 11 && sum !== 22 && sum !== 33) {
      sum = sum.toString().split('').map(Number).reduce((acc, digit) => acc + digit, 0)
    }
    
    return sum
  }

  const getSpanishInterpretation = (number: number, type: string): string => {
    const interpretations: { [key: string]: { [key: number]: string } } = {
      numeroPersonal: {
        1: "Eres un líder natural con una fuerte individualidad. Tu camino de vida está marcado por la innovación, la iniciativa y la capacidad de abrir nuevos senderos. Tienes el potencial de ser pionero en tu campo y inspirar a otros con tu determinación.",
        2: "Tu esencia se basa en la cooperación y la diplomacia. Eres un mediador natural que busca la armonía y el equilibrio. Tu sensibilidad te permite conectar profundamente con otros y crear vínculos duraderos.",
        3: "Posees un don natural para la comunicación y la creatividad. Tu optimismo y carisma iluminan cualquier ambiente. Estás destinado a expresar tu individualidad a través del arte, la palabra o cualquier forma de expresión creativa.",
        4: "Eres el constructor, la persona en quien otros confían para crear bases sólidas. Tu trabajo duro, disciplina y atención al detalle te permiten materializar proyectos duraderos. La estabilidad y la seguridad son fundamentales en tu vida.",
        5: "La libertad y la aventura definen tu esencia. Eres curioso, versátil y necesitas variedad en tu vida. Tu capacidad de adaptación te permite prosperar en situaciones cambiantes y explorar nuevos horizontes constantemente.",
        6: "El amor, la familia y la responsabilidad son el centro de tu existencia. Tienes un instinto natural para cuidar y nutrir a otros. Tu hogar es tu santuario y encuentras propósito en crear armonía y belleza en tu entorno.",
        7: "Eres el buscador de la verdad, el místico que busca respuestas profundas. Tu naturaleza introspectiva te lleva a explorar los misterios de la vida. La espiritualidad y el conocimiento son tus guías principales.",
        8: "El éxito material y el logro de metas ambiciosas caracterizan tu camino. Posees habilidades ejecutivas naturales y la determinación para alcanzar posiciones de poder e influencia. La abundancia es tu derecho de nacimiento.",
        9: "Eres el humanitario, el que sirve al bien común. Tu compasión y generosidad te impulsan a hacer del mundo un lugar mejor. Tu misión es inspirar y elevar a la humanidad a través de tu ejemplo y servicio.",
        11: "Como número maestro, posees una intuición extraordinaria y capacidades psíquicas naturales. Eres un canal de inspiración e iluminación para otros. Tu sensibilidad es tanto tu don como tu desafío.",
        22: "El Maestro Constructor, capaz de materializar sueños en gran escala. Combinas la visión del visionario con la practicidad del constructor. Tienes el potencial de crear algo que beneficie a la humanidad.",
        33: "El Maestro Sanador, cuya misión es elevar el nivel de conciencia de la humanidad a través del amor incondicional y la compasión. Tu presencia misma es sanadora y transformadora."
      },
      numeroDelAlma: {
        1: "Tu alma anhela liderazgo e independencia. Buscas ser reconocido como una autoridad en tu campo y necesitas la libertad para tomar tus propias decisiones.",
        2: "Tu alma busca armonía, amor y cooperación. Necesitas sentirte conectado con otros y crear relaciones significativas llenas de comprensión mutua.",
        3: "Tu alma vibra con la necesidad de expresión creativa y comunicación. Buscas alegría, diversión y la oportunidad de compartir tus talentos artísticos con el mundo.",
        4: "Tu alma desea orden, estabilidad y la satisfacción de construir algo duradero. Necesitas sentir que tu trabajo tiene propósito y contribuye a algo mayor.",
        5: "Tu alma anhela libertad, aventura y nuevas experiencias. Buscas variedad, viajes y la emoción de lo desconocido. La rutina es tu mayor enemigo.",
        6: "Tu alma busca amor, familia y la oportunidad de nutrir y cuidar a otros. El hogar, la belleza y la armonía son esenciales para tu bienestar espiritual.",
        7: "Tu alma busca sabiduría, comprensión profunda y conexión espiritual. Necesitas tiempo para la reflexión, el estudio y la exploración de los misterios de la vida.",
        8: "Tu alma desea éxito material, reconocimiento y la capacidad de influir en el mundo de manera significativa. Buscas poder y autoridad para crear cambios positivos.",
        9: "Tu alma vibra con el deseo de servir a la humanidad. Buscas oportunidades para hacer una diferencia en el mundo a través de la compasión y el servicio desinteresado.",
        11: "Tu alma busca inspiración espiritual y la oportunidad de ser un canal de luz para otros. Necesitas desarrollar tu intuición y confiar en tu guía interior.",
        22: "Tu alma desea crear algo grandioso que beneficie a la humanidad. Buscas la oportunidad de materializar visiones que puedan transformar el mundo.",
        33: "Tu alma vibra con el amor universal y el deseo de sanar y elevar a otros. Buscas ser un instrumento de paz y transformación en el mundo."
      },
      numeroDestino: {
        1: "Tu destino es liderar e innovar. Estás llamado a abrir nuevos caminos y ser pionero en tu campo. El universo te impulsa hacia posiciones de liderazgo donde puedas inspirar a otros.",
        2: "Tu destino es ser el mediador y constructor de puentes. Estás llamado a crear armonía, cooperar con otros y ser el pacificador en situaciones de conflicto.",
        3: "Tu destino es expresar, crear e inspirar. Estás llamado a usar tus talentos artísticos y comunicativos para iluminar y alegrar la vida de otros.",
        4: "Tu destino es construir y crear orden. Estás llamado a establecer bases sólidas, crear sistemas duraderos y ser el pilar de confiabilidad para otros.",
        5: "Tu destino es explorar y expandir horizontes. Estás llamado a ser el aventurero que descubre nuevas posibilidades y comparte la libertad con otros.",
        6: "Tu destino es nutrir y armonizar. Estás llamado a ser el sanador, el consejero y el creador de hogares llenos de amor y belleza.",
        7: "Tu destino es buscar y enseñar la verdad. Estás llamado a ser el filósofo, el investigador y el guía espiritual que ilumina los misterios de la existencia.",
        8: "Tu destino es materializar y lograr. Estás llamado a alcanzar el éxito material y usar tu poder e influencia para crear abundancia y oportunidades para otros.",
        9: "Tu destino es servir y elevar a la humanidad. Estás llamado a ser el humanitario que trabaja por el bien común y inspira a otros a través de tu compasión.",
        11: "Tu destino es inspirar e iluminar. Estás llamado a ser el visionario que trae nueva luz al mundo a través de tu intuición y sensibilidad espiritual.",
        22: "Tu destino es construir a gran escala. Estás llamado a materializar visiones grandiosas que puedan transformar la sociedad y beneficiar a la humanidad.",
        33: "Tu destino es sanar y transformar. Estás llamado a ser el maestro del amor que eleva la conciencia de la humanidad a través de tu compasión ilimitada."
      }
    }

    return interpretations[type]?.[number] || `Número ${number}: Una energía única que combina múltiples aspectos numerológicos.`
  }

  const getRecommendations = (report: NumerologyReport): string[] => {
    const recommendations = []
    
    if (report.numerosMaestros.length > 0) {
      recommendations.push(`Tienes números maestros (${report.numerosMaestros.join(', ')}), lo que indica un potencial espiritual especial. Dedica tiempo a la meditación y el desarrollo personal.`)
    }
    
    recommendations.push(`En tu año personal ${report.anoPersonal}, enfócate en ${getYearFocus(report.anoPersonal)}.`)
    recommendations.push(`Tu día personal ${report.diaPersonal} sugiere ${getDayGuidance(report.diaPersonal)}.`)
    
    return recommendations
  }

  const getYearFocus = (year: number): string => {
    const focuses: { [key: number]: string } = {
      1: "nuevos comienzos, iniciativas personales y establecer tu independencia",
      2: "cooperación, relaciones y paciencia en el desarrollo de proyectos",
      3: "creatividad, comunicación y expresión personal",
      4: "construcción, organización y establecimiento de bases sólidas",
      5: "cambios, libertad y nuevas experiencias",
      6: "responsabilidades familiares, hogar y servicios a otros",
      7: "introspección, estudio y desarrollo espiritual",
      8: "logros materiales, negocios y reconocimiento",
      9: "completar ciclos, servicio humanitario y preparación para nuevos comienzos"
    }
    
    return focuses[year] || "equilibrio y crecimiento personal"
  }

  const getDayGuidance = (day: number): string => {
    const guidance: { [key: number]: string } = {
      1: "es un día perfecto para liderar iniciativas y tomar decisiones importantes",
      2: "es ideal para colaborar, mediar y fortalecer relaciones",
      3: "es excelente para actividades creativas y comunicación",
      4: "es perfecto para trabajar duro y organizar aspectos prácticos",
      5: "es ideal para aventuras, cambios y nuevas experiencias",
      6: "es perfecto para dedicar tiempo a la familia y el hogar",
      7: "es ideal para la reflexión, el estudio y la búsqueda espiritual",
      8: "es excelente para negocios y asuntos materiales",
      9: "es perfecto para el servicio a otros y la generosidad"
    }
    
    return guidance[day] || "mantener equilibrio en todas las áreas de tu vida"
  }

  const getVowels = (name: string): string => {
    return name.toUpperCase().replace(/[^AEIOU]/g, '')
  }

  const getConsonants = (name: string): string => {
    return name.toUpperCase().replace(/[AEIOU\s]/g, '')
  }

  const getLifePathInterpretation = (number: number): string => {
    const interpretations: { [key: number]: string } = {
      1: "Eres un líder nato con independencia y originalidad. Tu camino implica ser pionero en nuevas ideas y tomar la iniciativa. Tienes una fuerza de voluntad extraordinaria y la capacidad de comenzar de nuevo en cualquier situación. Tu misión es liderar el camino para otros.",
      2: "Eres un pacificador diplomático con habilidades excepcionales de cooperación. Tu camino implica trabajar armoniosamente con otros y crear equilibrio. Sobresales en asociaciones y entornos colaborativos. Tu don es unir a las personas.",
      3: "Eres un comunicador creativo con talentos artísticos naturales. Tu camino implica la autoexpresión e inspirar a otros a través de tu creatividad. Traes alegría y optimismo dondequiera que vayas. Tu misión es iluminar el mundo con belleza.",
      4: "Eres un organizador práctico con una ética de trabajo inquebrantable. Tu camino implica construir fundaciones sólidas y crear estructuras duraderas. Eres confiable, metódico y orientado a los detalles. Tu don es crear estabilidad.",
      5: "Eres un aventurero amante de la libertad que anhela variedad y cambio. Tu camino implica explorar nuevas experiencias y promover el progreso. Eres versátil, curioso y dinámico. Tu misión es expandir horizontes.",
      6: "Eres un cuidador nutritivo enfocado en la familia y la responsabilidad. Tu camino implica sanar, enseñar y cuidar de otros. Tienes un fuerte sentido del deber y la compasión. Tu don es crear armonía en el hogar.",
      7: "Eres un buscador espiritual con una mente profundamente analítica. Tu camino implica buscar la verdad y desarrollar sabiduría interior. Eres introspectivo, intuitivo y filosófico. Tu misión es descubrir misterios profundos.",
      8: "Eres un logrador material con habilidades comerciales excepcionales. Tu camino implica dominar el mundo material y alcanzar el éxito. Eres ambicioso, organizado y orientado a resultados. Tu don es crear abundancia.",
      9: "Eres un ayudante humanitario con una perspectiva universal. Tu camino implica servir a otros y contribuir al bien mayor. Eres generoso, compasivo e idealista. Tu misión es elevar a la humanidad.",
      11: "Eres un líder inspiracional intuitivo con conciencia espiritual elevada. Tu camino implica iluminar a otros y servir como faro de esperanza. Tienes poderosas habilidades psíquicas. Tu misión es inspirar transformación.",
      22: "Eres un constructor maestro que puede manifestar sueños en realidad. Tu camino implica crear algo significativo que beneficie a muchos. Tienes habilidades prácticas y espirituales extraordinarias. Tu don es materializar visiones.",
      33: "Eres un maestro instructor con compasión excepcional y habilidades de sanación. Tu camino implica elevar a la humanidad a través del amor y el servicio. Inspiras y sanas a escala global. Tu misión es enseñar amor incondicional."
    }
    
    return interpretations[number] || "Tienes un camino espiritual único con significado especial que trasciende las interpretaciones numerológicas tradicionales."
  }

  const getDestinyInterpretation = (number: number): string => {
    const interpretations: { [key: number]: string } = {
      1: "Tu destino es liderar e innovar. Estás destinado a ser un pionero, abriendo nuevos caminos e inspirando a otros a seguirte. Tu número del destino te llama a la originalidad.",
      2: "Tu destino es traer armonía y cooperación. Estás destinado a ser un mediador, ayudando a otros a trabajar juntos pacíficamente. Tu misión es crear puentes entre las personas.",
      3: "Tu destino es crear y comunicar. Estás destinado a expresarte artísticamente y traer alegría al mundo. Tu don especial es inspirar a través de la belleza y la creatividad.",
      4: "Tu destino es construir y organizar. Estás destinado a crear estructuras y sistemas duraderos que sirvan a otros. Tu misión es establecer fundaciones sólidas para el futuro.",
      5: "Tu destino es explorar y liberar. Estás destinado a romper barreras y ayudar a otros a abrazar la libertad y el cambio. Tu propósito es expandir horizontes mentales.",
      6: "Tu destino es nutrir y sanar. Estás destinado a cuidar de otros y crear comunidades armoniosas. Tu misión especial es ser el corazón que une a las familias.",
      7: "Tu destino es buscar y enseñar la verdad. Estás destinado a desarrollar sabiduría y compartir percepciones espirituales con otros. Tu propósito es iluminar misterios.",
      8: "Tu destino es lograr y prosperar. Estás destinado a dominar el éxito material y usarlo para beneficiar a la sociedad. Tu misión es crear abundancia responsable.",
      9: "Tu destino es servir a la humanidad. Estás destinado a contribuir a causas más grandes que tú mismo e inspirar cambio global. Tu propósito es elevar la conciencia colectiva.",
      11: "Tu destino es inspirar e iluminar. Estás destinado a ser un maestro espiritual y guía para otros. Tu misión es despertar la conciencia espiritual en la humanidad.",
      22: "Tu destino es construir a gran escala. Estás destinado a crear instituciones o movimientos duraderos que transformen la sociedad. Tu propósito es materializar utopías.",
      33: "Tu destino es sanar y elevar a la humanidad. Estás destinado a ser un maestro instructor del amor y la compasión. Tu misión es enseñar sanación universal."
    }
    
    return interpretations[number] || "Tu destino involucra una misión única que va más allá del entendimiento convencional."
  }

  const getSoulUrgeInterpretation = (number: number): string => {
    const interpretations: { [key: number]: string } = {
      1: "En lo profundo, anhelas independencia y liderazgo. Tu alma te impulsa a ser original y hacer tu propio camino en la vida. Buscas ser el primero y el mejor.",
      2: "En lo profundo, anhelas armonía y compañía. Tu alma te impulsa a conectar con otros y crear relaciones pacíficas. Necesitas amor y colaboración para florecer.",
      3: "En lo profundo, anhelas expresión creativa y alegría. Tu alma te impulsa a compartir tus dones artísticos e inspirar a otros. Buscas belleza y celebración en la vida.",
      4: "En lo profundo, anhelas estabilidad y orden. Tu alma te impulsa a construir algo duradero y significativo. Necesitas estructura y propósito para sentirte completo.",
      5: "En lo profundo, anhelas libertad y aventura. Tu alma te impulsa a explorar nuevos horizontes y abrazar el cambio. Buscas experiencias variadas y emocionantes.",
      6: "En lo profundo, anhelas amor y conexión familiar. Tu alma te impulsa a nutrir a otros y crear un hogar armonioso. Necesitas dar y recibir cuidado incondicional.",
      7: "En lo profundo, anhelas conocimiento y comprensión espiritual. Tu alma te impulsa a buscar la verdad y desarrollar sabiduría interior. Buscas respuestas a los misterios de la vida.",
      8: "En lo profundo, anhelas éxito material y reconocimiento. Tu alma te impulsa a lograr grandeza y dejar un legado. Buscas poder e influencia para crear cambios positivos.",
      9: "En lo profundo, anhelas amor universal y servicio. Tu alma te impulsa a ayudar a la humanidad y hacer del mundo un lugar mejor. Buscas propósito en causas nobles.",
      11: "En lo profundo, anhelas iluminación espiritual e inspiración. Tu alma te impulsa a ser una luz para otros. Buscas despertar la conciencia espiritual en ti y en otros.",
      22: "En lo profundo, anhelas la capacidad de manifestar grandes visiones. Tu alma te impulsa a construir algo que transforme el mundo. Buscas materializar sueños imposibles.",
      33: "En lo profundo, anhelas la oportunidad de sanar y enseñar. Tu alma te impulsa a ser un maestro del amor y la compasión. Buscas servir como sanador universal."
    }
    
    return interpretations[number] || "En lo profundo, anhelas algo único y espiritualmente significativo que trasciende lo ordinario."
  }

  const getPersonalityInterpretation = (number: number): string => {
    const interpretations: { [key: number]: string } = {
      1: "Otros te ven como confiado, independiente y decidido. Proyectas liderazgo y originalidad en todo lo que haces. Tu presencia inspira respeto y admiración.",
      2: "Otros te ven como gentil, cooperativo y diplomático. Proyectas armonía y paz en tus interacciones. Tu presencia calma y une a las personas.",
      3: "Otros te ven como encantador, creativo y optimista. Proyectas alegría y talento artístico que atrae a las personas hacia ti. Tu presencia ilumina cualquier ambiente.",
      4: "Otros te ven como confiable, práctico y trabajador. Proyectas estabilidad y confianza. Tu presencia transmite seguridad y solidez.",
      5: "Otros te ven como dinámico, aventurero y progresista. Proyectas energía y emoción por nuevas experiencias. Tu presencia estimula y motiva el cambio.",
      6: "Otros te ven como cariñoso, responsable y protector. Proyectas calidez y deseo de ayudar a otros. Tu presencia crea un ambiente de hogar y cuidado.",
      7: "Otros te ven como misterioso, sabio e introspectivo. Proyectas profundidad y perspicacia espiritual. Tu presencia invita a la reflexión y el autoconocimiento.",
      8: "Otros te ven como ambicioso, exitoso y con autoridad. Proyectas poder y logros materiales. Tu presencia comanda respeto y admiration por tus logros.",
      9: "Otros te ven como compasivo, generoso e idealista. Proyectas amor universal y preocupación humanitaria. Tu presencia inspira bondad y servicio.",
      11: "Otros te ven como inspiracional, intuitivo y espiritualmente consciente. Proyectas sabiduría más allá de tus años. Tu presencia eleva y despierta conciencias.",
      22: "Otros te ven como capaz de grandes logros y magia práctica. Proyectas la habilidad de convertir sueños en realidad. Tu presencia inspira posibilidades infinitas.",
      33: "Otros te ven como un sanador y maestro natural. Proyectas amor incondicional y maestría espiritual. Tu presencia trae paz y transformación a otros."
    }
    
    return interpretations[number] || "Otros te ven como único y especial, con cualidades difíciles de definir pero imposibles de ignorar."
  }

  const handleCalculate = async () => {
    if (!name || !birthDate) return
    
    setCalculating(true)
    
    try {
      // Use real agent system for calculation
      const { AgentAPI } = await import('@/lib/agentSystem')
      const agentResult = await AgentAPI.calculateNumerology(name, birthDate)
      
      if (agentResult.success) {
        setResult({
          lifePathNumber: agentResult.data.lifePathNumber,
          destinyNumber: agentResult.data.destinyNumber,
          soulUrgeNumber: agentResult.data.soulUrgeNumber,
          personalityNumber: agentResult.data.personalityNumber,
          lifePathInterpretation: agentResult.data.interpretation.lifePath,
          destinyInterpretation: agentResult.data.interpretation.destiny,
          soulUrgeInterpretation: agentResult.data.interpretation.soulUrge,
          personalityInterpretation: agentResult.data.interpretation.personality
        })
      } else {
        // Fallback calculation
        const lifePathNumber = calculateLifePathNumber(birthDate)
        const destinyNumber = calculateNameNumber(name)
        const soulUrgeNumber = calculateNameNumber(getVowels(name))
        const personalityNumber = calculateNameNumber(getConsonants(name))
        
        setResult({
          lifePathNumber,
          destinyNumber,
          soulUrgeNumber,
          personalityNumber,
          lifePathInterpretation: getLifePathInterpretation(lifePathNumber),
          destinyInterpretation: getDestinyInterpretation(destinyNumber),
          soulUrgeInterpretation: getSoulUrgeInterpretation(soulUrgeNumber),
          personalityInterpretation: getPersonalityInterpretation(personalityNumber)
        })
      }
      
    } catch (error) {
      // Final fallback to local calculation
      const lifePathNumber = calculateLifePathNumber(birthDate)
      const destinyNumber = calculateNameNumber(name)
      const soulUrgeNumber = calculateNameNumber(getVowels(name))
      const personalityNumber = calculateNameNumber(getConsonants(name))
      
      setResult({
        lifePathNumber,
        destinyNumber,
        soulUrgeNumber,
        personalityNumber,
        lifePathInterpretation: getLifePathInterpretation(lifePathNumber),
        destinyInterpretation: getDestinyInterpretation(destinyNumber),
        soulUrgeInterpretation: getSoulUrgeInterpretation(soulUrgeNumber),
        personalityInterpretation: getPersonalityInterpretation(personalityNumber)
      })
    }
    
    setCalculating(false)
  }

  return (
    <div className="space-y-6">
      {/* Input Form */}
      <div className="space-y-4">
        <div>
          <label className="block text-lg font-medium text-gray-800 mb-2">
            Tu Nombre Completo
          </label>
          <input
            type="text"
            value={name}
            onChange={(e) => setName(e.target.value)}
            className="w-full px-4 py-3 text-lg border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"
            placeholder="Ingresa tu nombre completo como aparece en tu partida de nacimiento"
          />
        </div>
        
        <div>
          <label className="block text-lg font-medium text-gray-800 mb-2">
            Tu Fecha de Nacimiento
          </label>
          <input
            type="date"
            value={birthDate}
            onChange={(e) => setBirthDate(e.target.value)}
            className="w-full px-4 py-3 text-lg border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"
          />
        </div>
        
        <button
          onClick={handleCalculate}
          disabled={!name || !birthDate || calculating}
          className="w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white text-lg font-semibold py-4 px-6 rounded-xl hover:from-purple-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-xl"
        >
          {calculating ? 'Calculando Tus Números...' : 'Revelar Mi Numerología'}
        </button>
      </div>

      {calculating && (
        <div className="text-center py-12">
          <div className="inline-flex items-center space-x-2">
            <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"></div>
            <span className="text-lg text-gray-600">Analizando tus números...</span>
          </div>
        </div>
      )}

      {result && !calculating && (
        <div className="space-y-6">
          {/* Numbers Overview */}
          <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
            <div className="text-center p-6 bg-gradient-to-br from-purple-50 to-purple-100 rounded-2xl">
              <div className="text-3xl font-bold text-purple-600 mb-2">{result.lifePathNumber}</div>
              <div className="text-sm font-medium text-purple-800">Camino de Vida</div>
            </div>
            <div className="text-center p-6 bg-gradient-to-br from-indigo-50 to-indigo-100 rounded-2xl">
              <div className="text-3xl font-bold text-indigo-600 mb-2">{result.destinyNumber}</div>
              <div className="text-sm font-medium text-indigo-800">Destino</div>
            </div>
            <div className="text-center p-6 bg-gradient-to-br from-pink-50 to-pink-100 rounded-2xl">
              <div className="text-3xl font-bold text-pink-600 mb-2">{result.soulUrgeNumber}</div>
              <div className="text-sm font-medium text-pink-800">Número del Alma</div>
            </div>
            <div className="text-center p-6 bg-gradient-to-br from-emerald-50 to-emerald-100 rounded-2xl">
              <div className="text-3xl font-bold text-emerald-600 mb-2">{result.personalityNumber}</div>
              <div className="text-sm font-medium text-emerald-800">Personalidad</div>
            </div>
          </div>
          
          {/* Detailed Interpretations */}
          <div className="space-y-6">
            <div className="bg-gradient-to-r from-purple-50 to-purple-100 p-6 rounded-2xl">
              <h3 className="text-xl font-bold text-purple-800 mb-3 flex items-center">
                <span className="w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3">
                  {result.lifePathNumber}
                </span>
                Tu Camino de Vida
              </h3>
              <p className="text-purple-700 leading-relaxed">{result.lifePathInterpretation}</p>
            </div>
            
            <div className="bg-gradient-to-r from-indigo-50 to-indigo-100 p-6 rounded-2xl">
              <h3 className="text-xl font-bold text-indigo-800 mb-3 flex items-center">
                <span className="w-8 h-8 bg-indigo-600 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3">
                  {result.destinyNumber}
                </span>
                Tu Destino
              </h3>
              <p className="text-indigo-700 leading-relaxed">{result.destinyInterpretation}</p>
            </div>
            
            <div className="bg-gradient-to-r from-pink-50 to-pink-100 p-6 rounded-2xl">
              <h3 className="text-xl font-bold text-pink-800 mb-3 flex items-center">
                <span className="w-8 h-8 bg-pink-600 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3">
                  {result.soulUrgeNumber}
                </span>
                El Deseo de Tu Alma
              </h3>
              <p className="text-pink-700 leading-relaxed">{result.soulUrgeInterpretation}</p>
            </div>
            
            <div className="bg-gradient-to-r from-emerald-50 to-emerald-100 p-6 rounded-2xl">
              <h3 className="text-xl font-bold text-emerald-800 mb-3 flex items-center">
                <span className="w-8 h-8 bg-emerald-600 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3">
                  {result.personalityNumber}
                </span>
                Cómo Te Ven Los Demás
              </h3>
              <p className="text-emerald-700 leading-relaxed">{result.personalityInterpretation}</p>
            </div>
            
            {/* Message for reflection */}
            <div className="bg-gradient-to-r from-yellow-50 to-orange-50 p-6 rounded-2xl border-l-4 border-yellow-400">
              <p className="text-gray-700 italic">
                "Recuerda que la numerología ofrece una guía para la reflexión personal y el crecimiento individual. 
                Usa esta información como una herramienta de autoconocimiento y desarrollo espiritual."
              </p>
            </div>
          </div>
        </div>
      )}
    </div>
  )
}
